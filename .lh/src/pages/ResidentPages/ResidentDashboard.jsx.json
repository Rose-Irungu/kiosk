{
    "sourceFile": "src/pages/ResidentPages/ResidentDashboard.jsx",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 1,
            "patches": [
                {
                    "date": 1755437303674,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1755437318632,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -104,12 +104,12 @@\n                     </div>\r\n                 </div>\r\n             </div>\r\n             <div className='flex flex-row justify-between w-full h-[96px] rounded-[12px] py-[12px] px-[14px] space-x-4'>\r\n-                {/* <SosButton callback={() => {\r\n+                <SosButton callback={() => {\r\n                            submitEmergency();\r\n                            notify();\r\n-                    }}/> */}\r\n+                    }}/>\r\n                 <SafetyProtocolsButton callback={()=>navigate(\"/resident/safetyprotocols\")}/>\r\n             </div>\r\n         </div>\r\n      </div>\r\n"
                }
            ],
            "date": 1755437303674,
            "name": "Commit-0",
            "content": "import React, { useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport toast from 'react-hot-toast';\r\n//import InviteGuest from '../../components/ResidentComponents/Buttons/InviteGuest';\r\nimport SosButton from '../../components/ResidentComponents/Buttons/SosButton';\r\nimport SafetyProtocolsButton from '../../components/ResidentComponents/Buttons/SafetyProtocolsButton';\r\nimport PastGuestsButton from '../../components/ResidentComponents/Buttons/PastGuestsButton';\r\nimport MyGuestsFrame from '../../components/ResidentComponents/ResidentCards/MyGuestsFrame';\r\nimport ResidentLayout from '../../components/ResidentComponents/ResidentLayout';\r\nimport PastToday from '../../components/ResidentComponents/SafetyCards/PastToday';\r\nimport PastThisWeek from '../../components/ResidentComponents/SafetyCards/PastThisWeek';\r\nimport PastThisMonth from '../../components/ResidentComponents/SafetyCards/PastThisMonth';\r\nimport NoteP from '../../components/ResidentComponents/SafetyCards/NoteP';\r\n\r\n//Service imports\r\nimport {clickTest} from '../../services/residentDashboardServices';\r\nimport { submitEmergency } from '../../scripts/submitEmergency';\r\nimport { getAllVisitors } from '../../services/residentDashboardServices';\r\n\r\nfunction ResidentDashboard() {\r\n\r\n    const [activeCardId, setActiveCardId] = useState(null);\r\n    const [loading, setLoading] = useState(true);\r\n    const [visitors, setVisitors] = useState([]);\r\n    const navigate = useNavigate();\r\n\r\n    const notify = () => {\r\n    toast.custom((t) => (\r\n        <div\r\n        className={`bg-white border border-red-500 text-red-700 rounded px-4 py-2 flex items-center gap-4 shadow-md ${\r\n            t.visible ? 'animate-enter' : 'animate-leave'\r\n        }`}\r\n        >\r\n        <span>ðŸš¨ S.O.S triggered successfully</span>\r\n        <button\r\n            onClick={() => toast.dismiss(t.id)}\r\n            className=\"ml-auto text-red-500 hover:text-red-700 font-bold\"\r\n        >\r\n            âœ–\r\n        </button>\r\n        </div>\r\n    ), {\r\n        duration: Infinity,\r\n    });\r\n    };\r\n\r\n    useEffect(() =>{\r\n\r\n        const getVisitors = async () =>{\r\n            const allVisitors = await getAllVisitors();\r\n            setVisitors(allVisitors);\r\n            console.log(\"All visitors:\", allVisitors);\r\n            return allVisitors;\r\n        };\r\n        getVisitors();\r\n        setLoading(false);\r\n    }, []);\r\n\r\n    const handleCardClick = (id) => {\r\n        setActiveCardId(id);\r\n    };\r\n\r\n  return (\r\n    <ResidentLayout>\r\n     <div className=\"flex flex-wrap flex-col justify-center mb-[12px] space-y-4\">\r\n        <div className='flex flex-col w-full h-[341px] rounded-[12px] py-[12px] px-[8px] gap-[18px] bg-[#E6FBE9]'>\r\n          <MyGuestsFrame/>\r\n        </div>\r\n        <div className='flex flex-col w-full lg:h-[222px] top-[521px] rounded-[12px] py-[8px] px-[12px] bg-[#F0EEFD] gap-[10px]'>\r\n            <div className='flex flex-row justify-between w-full h-[32px]'>\r\n                <div className='flex flex-row w-[182px] h-[32px]'>\r\n                    <div className='h-[32px] w-[32px]'>\r\n                        <img\r\n                            src=\"/mgeni.svg\"\r\n                            className=\"w-full h-full text-red-500 mr-3\"\r\n                        />\r\n                    </div>\r\n                    <div className='w-[138px] h-[31px]'>\r\n                        <h1 className='font-dmsans font-semibold text-[24px] sm:text-[18px] text-[#002706]'>Past Guests</h1>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div className='flex flex-row justify-between w-full h-[40px] rounded-[24px] py-[4px] px-[8px] gap-[10px]'>\r\n                <PastGuestsButton label={\"Today\"} callback={() => clickTest} onCardClick={handleCardClick} id = \"card1\" activeCardId={activeCardId}/>\r\n                <PastGuestsButton label={\"This Week\"} callback={() => clickTest} onCardClick={handleCardClick} id = \"card2\" activeCardId={activeCardId}/>\r\n                <PastGuestsButton label={\"This Month\"} callback={() => clickTest} onCardClick={handleCardClick} id = \"card3\" activeCardId={activeCardId}/>\r\n            </div>\r\n            <div className='flex flex-row w-full h-[106px] py-[12px] px-[8px] gap-[10px]'>\r\n                {loading? (<NoteP text={\"Loading...\"}/>) : (activeCardId == 'card1' ? (<PastToday allVisitors={visitors}/>) : activeCardId == 'card2' ? (<PastThisWeek allVisitors={visitors}/>) : <PastThisMonth allVisitors={visitors}/>)}\r\n            </div>\r\n        </div>\r\n        <div className='flex flex-col w-full lg:h-[165px] lg:top-[784px] rounded-[12px] py-[10px] px-[20px] bg-[#FDE8E7]'>\r\n            <div className='flex flex-row justify-between w-full h-[32px]'>\r\n                <div className='flex flex-row justify-center gap-[12px] w-[262px] h-[32px]'>\r\n                    <div className='h-[32px] w-[32px]'>\r\n                        <img\r\n                            src=\"/emg.svg\"\r\n                            className=\"w-full h-full text-red-500 mr-3\"\r\n                            alt=\"emergency icon\"\r\n                        />\r\n                    </div>\r\n                    <div className='w-[218px] h-[31px]'>\r\n                        <h1 className='font-dmsans font-semibold sm:text-base text-[24px] text-[#610C07]'>Emergencies Panel</h1>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div className='flex flex-row justify-between w-full h-[96px] rounded-[12px] py-[12px] px-[14px] space-x-4'>\r\n                {/* <SosButton callback={() => {\r\n                           submitEmergency();\r\n                           notify();\r\n                    }}/> */}\r\n                <SafetyProtocolsButton callback={()=>navigate(\"/resident/safetyprotocols\")}/>\r\n            </div>\r\n        </div>\r\n     </div>\r\n     </ResidentLayout>\r\n  );\r\n}\r\n\r\nexport default ResidentDashboard;"
        }
    ]
}